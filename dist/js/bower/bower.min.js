/*
 Noahdecoco 2016-03-16 
*/
!function(a){function b(){return""===i.hash||"#"===i.hash}function c(a,b){for(var c=0;c<a.length;c+=1)if(b(a[c],c,a)===!1)return}function d(a){for(var b=[],c=0,d=a.length;d>c;c++)b=b.concat(a[c]);return b}function e(a,b,c){if(!a.length)return c();var d=0;!function e(){b(a[d],function(b){b||b===!1?(c(b),c=function(){}):(d+=1,d===a.length?c():e())})}()}function f(a,b,c){c=a;for(var d in b)if(b.hasOwnProperty(d)&&(c=b[d](a),c!==a))break;return c===a?"([._a-zA-Z0-9-%()]+)":c}function g(a,b){for(var c,d=0,e="";c=a.substr(d).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)d=c.index+c[0].length,c[0]=c[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),e+=a.substr(0,c.index)+c[0];a=e+=a.substr(d);var g,h,i=a.match(/:([^\/]+)/gi);if(i){h=i.length;for(var j=0;h>j;j++)g=i[j],a="::"===g.slice(0,2)?g.slice(1):a.replace(g,f(g,b))}return a}function h(a,b,c,d){var e,f=0,g=0,h=0,c=(c||"(").toString(),d=(d||")").toString();for(e=0;e<a.length;e++){var i=a[e];if(i.indexOf(c,f)>i.indexOf(d,f)||~i.indexOf(c,f)&&!~i.indexOf(d,f)||!~i.indexOf(c,f)&&~i.indexOf(d,f)){if(g=i.indexOf(c,f),h=i.indexOf(d,f),~g&&!~h||!~g&&~h){var j=a.slice(0,(e||1)+1).join(b);a=[j].concat(a.slice((e||1)+1))}f=(h>g?h:g)+1,e=0}else f=0}return a}var i=document.location,j={mode:"modern",hash:i.hash,history:!1,check:function(){var a=i.hash;a!=this.hash&&(this.hash=a,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(a,b){function c(a){for(var b=0,c=k.listeners.length;c>b;b++)k.listeners[b](a)}var d=this;if(this.history=b,k.listeners||(k.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=c},500):window.onhashchange=c,this.mode="modern";else{var e=document.createElement("iframe");e.id="state-frame",e.style.display="none",document.body.appendChild(e),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&d.check()}),window.setInterval(function(){d.check()},50),this.onHashChanged=c,this.mode="legacy"}return k.listeners.push(a),this.mode},destroy:function(a){if(k&&k.listeners)for(var b=k.listeners,c=b.length-1;c>=0;c--)b[c]===a&&b.splice(c,1)},setHash:function(a){return"legacy"===this.mode&&this.writeFrame(a),this.history===!0?(window.history.pushState({},document.title,a),this.fire()):i.hash="/"===a[0]?a:"/"+a,this},writeFrame:function(a){var b=document.getElementById("state-frame"),c=b.contentDocument||b.contentWindow.document;c.open(),c.write("<script>_hash = '"+a+"'; onload = parent.listener.syncHash;<script>"),c.close()},syncHash:function(){var a=this._hash;return a!=i.hash&&(i.hash=a),this},onHashChanged:function(){}},k=a.Router=function(a){return this instanceof k?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),void this.mount(a||{})):new k(a)};k.prototype.init=function(a){var c,d=this;return this.handler=function(a){var b=a&&a.newURL||window.location.hash,c=d.history===!0?d.getPath():b.replace(/.*#/,"");d.dispatch("on","/"===c.charAt(0)?c:"/"+c)},j.init(this.handler,this.history),this.history===!1?b()&&a?i.hash=a:b()||d.dispatch("on","/"+i.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(c=b()&&a?a:b()?null:i.hash.replace(/^#/,""),c&&window.history.replaceState({},document.title,c)):c=this.getPath(),(c||this.run_in_init===!0)&&this.handler()),this},k.prototype.explode=function(){var a=this.history===!0?this.getPath():i.hash;return"/"===a.charAt(1)&&(a=a.slice(1)),a.slice(1,a.length).split("/")},k.prototype.setRoute=function(a,b,c){var d=this.explode();return"number"==typeof a&&"string"==typeof b?d[a]=b:"string"==typeof c?d.splice(a,b,s):d=[a],j.setHash(d.join("/")),d},k.prototype.insertEx=function(a,b,c,d){return"once"===a&&(a="on",c=function(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(this,arguments))}}(c)),this._insert(a,b,c,d)},k.prototype.getRoute=function(a){var b=a;if("number"==typeof a)b=this.explode()[a];else if("string"==typeof a){var c=this.explode();b=c.indexOf(a)}else b=this.explode();return b},k.prototype.destroy=function(){return j.destroy(this.handler),this},k.prototype.getPath=function(){var a=window.location.pathname;return"/"!==a.substr(0,1)&&(a="/"+a),a};var l=/\?.*/;k.prototype.configure=function(a){a=a||{};for(var b=0;b<this.methods.length;b++)this._methods[this.methods[b]]=!0;return this.recurse=a.recurse||this.recurse||!1,this.async=a.async||!1,this.delimiter=a.delimiter||"/",this.strict="undefined"==typeof a.strict?!0:a.strict,this.notfound=a.notfound,this.resource=a.resource,this.history=a.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&a.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&a.convert_hash_in_init!==!1,this.every={after:a.after||null,before:a.before||null,on:a.on||null},this},k.prototype.param=function(a,b){":"!==a[0]&&(a=":"+a);var c=new RegExp(a,"g");return this.params[a]=function(a){return a.replace(c,b.source||b)},this},k.prototype.on=k.prototype.route=function(a,b,c){var d=this;return c||"function"!=typeof b||(c=b,b=a,a="on"),Array.isArray(b)?b.forEach(function(b){d.on(a,b,c)}):(b.source&&(b=b.source.replace(/\\\//gi,"/")),Array.isArray(a)?a.forEach(function(a){d.on(a.toLowerCase(),b,c)}):(b=b.split(new RegExp(this.delimiter)),b=h(b,this.delimiter),void this.insert(a,this.scope.concat(b),c)))},k.prototype.path=function(a,b){var c=this.scope.length;a.source&&(a=a.source.replace(/\\\//gi,"/")),a=a.split(new RegExp(this.delimiter)),a=h(a,this.delimiter),this.scope=this.scope.concat(a),b.call(this,this),this.scope.splice(c,a.length)},k.prototype.dispatch=function(a,b,c){function d(){f.last=g.after,f.invoke(f.runlist(g),f,c)}var e,f=this,g=this.traverse(a,b.replace(l,""),this.routes,""),h=this._invoked;return this._invoked=!0,g&&0!==g.length?("forward"===this.recurse&&(g=g.reverse()),e=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],e&&e.length>0&&h?(this.async?this.invoke(e,this,d):(this.invoke(e,this),d()),!0):(d(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:a,path:b},c),!1)},k.prototype.invoke=function(a,b,d){var f,g=this;this.async?(f=function(c,d){return Array.isArray(c)?e(c,f,d):void("function"==typeof c&&c.apply(b,(a.captures||[]).concat(d)))},e(a,f,function(){d&&d.apply(b,arguments)})):(f=function(d){return Array.isArray(d)?c(d,f):"function"==typeof d?d.apply(b,a.captures||[]):void("string"==typeof d&&g.resource&&g.resource[d].apply(b,a.captures||[]))},c(a,f))},k.prototype.traverse=function(a,b,c,d,e){function f(a){function b(a){for(var c=[],d=0;d<a.length;d++)c[d]=Array.isArray(a[d])?b(a[d]):a[d];return c}function c(a){for(var b=a.length-1;b>=0;b--)Array.isArray(a[b])?(c(a[b]),0===a[b].length&&a.splice(b,1)):e(a[b])||a.splice(b,1)}if(!e)return a;var d=b(a);return d.matched=a.matched,d.captures=a.captures,d.after=a.after.filter(e),c(d),d}var g,h,i,j,k=[];if(b===this.delimiter&&c[a])return j=[[c.before,c[a]].filter(Boolean)],j.after=[c.after].filter(Boolean),j.matched=!0,j.captures=[],f(j);for(var l in c)if(c.hasOwnProperty(l)&&(!this._methods[l]||this._methods[l]&&"object"==typeof c[l]&&!Array.isArray(c[l]))){if(g=h=d+this.delimiter+l,this.strict||(h+="["+this.delimiter+"]?"),i=b.match(new RegExp("^"+h)),!i)continue;if(i[0]&&i[0]==b&&c[l][a])return j=[[c[l].before,c[l][a]].filter(Boolean)],j.after=[c[l].after].filter(Boolean),j.matched=!0,j.captures=i.slice(1),this.recurse&&c===this.routes&&(j.push([c.before,c.on].filter(Boolean)),j.after=j.after.concat([c.after].filter(Boolean))),f(j);if(j=this.traverse(a,b,c[l],g),j.matched)return j.length>0&&(k=k.concat(j)),this.recurse&&(k.push([c[l].before,c[l].on].filter(Boolean)),j.after=j.after.concat([c[l].after].filter(Boolean)),c===this.routes&&(k.push([c.before,c.on].filter(Boolean)),j.after=j.after.concat([c.after].filter(Boolean)))),k.matched=!0,k.captures=j.captures,k.after=j.after,f(k)}return!1},k.prototype.insert=function(a,b,c,d){var e,f,h,i,j;if(b=b.filter(function(a){return a&&a.length>0}),d=d||this.routes,j=b.shift(),/\:|\*/.test(j)&&!/\\d|\\w/.test(j)&&(j=g(j,this.params)),b.length>0)return d[j]=d[j]||{},this.insert(a,b,c,d[j]);if(j||b.length||d!==this.routes){if(f=typeof d[j],h=Array.isArray(d[j]),d[j]&&!h&&"object"==f)switch(e=typeof d[j][a]){case"function":return void(d[j][a]=[d[j][a],c]);case"object":return void d[j][a].push(c);case"undefined":return void(d[j][a]=c)}else if("undefined"==f)return i={},i[a]=c,void(d[j]=i);throw new Error("Invalid route context: "+f)}switch(e=typeof d[a]){case"function":return void(d[a]=[d[a],c]);case"object":return void d[a].push(c);case"undefined":return void(d[a]=c)}},k.prototype.extend=function(a){function b(a){d._methods[a]=!0,d[a]=function(){var b=1===arguments.length?[a,""]:[a];d.on.apply(d,b.concat(Array.prototype.slice.call(arguments)))}}var c,d=this,e=a.length;for(c=0;e>c;c++)b(a[c])},k.prototype.runlist=function(a){var b=this.every&&this.every.before?[this.every.before].concat(d(a)):d(a);return this.every&&this.every.on&&b.push(this.every.on),b.captures=a.captures,b.source=a.source,b},k.prototype.mount=function(a,b){function c(b,c){var e=b,f=b.split(d.delimiter),g=typeof a[b],i=""===f[0]||!d._methods[f[0]],j=i?"on":e;return i&&(e=e.slice((e.match(new RegExp("^"+d.delimiter))||[""])[0].length),f.shift()),i&&"object"===g&&!Array.isArray(a[b])?(c=c.concat(f),void d.mount(a[b],c)):(i&&(c=c.concat(e.split(d.delimiter)),c=h(c,d.delimiter)),void d.insert(j,c,a[b]))}if(a&&"object"==typeof a&&!Array.isArray(a)){var d=this;b=b||[],Array.isArray(b)||(b=b.split(d.delimiter));for(var e in a)a.hasOwnProperty(e)&&c(e,b.slice(0))}}}("object"==typeof exports?exports:window),function(a){"use strict";function b(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1}a.version="1.0.0";var c=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,d=/,/,e=/^\s*(_?)(\S+?)\1\s*$/,f=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;a.errors={MAPPING_BAD_PROP:"[Error infuse.Injector.mapClass/mapValue] the first parameter is invalid, a string is expected",MAPPING_BAD_VALUE:"[Error infuse.Injector.mapClass/mapValue] the second parameter is invalid, it can't null or undefined, with property: ",MAPPING_BAD_CLASS:"[Error infuse.Injector.mapClass/mapValue] the second parameter is invalid, a function is expected, with property: ",MAPPING_BAD_SINGLETON:"[Error infuse.Injector.mapClass] the third parameter is invalid, a boolean is expected, with property: ",MAPPING_ALREADY_EXISTS:"[Error infuse.Injector.mapClass/mapValue] this mapping already exists, with property: ",CREATE_INSTANCE_INVALID_PARAM:"[Error infuse.Injector.createInstance] invalid parameter, a function is expected",NO_MAPPING_FOUND:"[Error infuse.Injector.getInstance] no mapping found",INJECT_INSTANCE_IN_ITSELF_PROPERTY:"[Error infuse.Injector.getInjectedValue] A matching property has been found in the target, you can't inject an instance in itself",INJECT_INSTANCE_IN_ITSELF_CONSTRUCTOR:"[Error infuse.Injector.getInjectedValue] A matching constructor parameter has been found in the target, you can't inject an instance in itself",DEPENDENCIES_MISSING_IN_STRICT_MODE:'[Error infuse.Injector.getDependencies] An "inject" property (array) that describes the dependencies is missing in strict mode.'};var g=function(a,b,c,d){this.prop=a,this.value=b,this.cl=c,this.singleton=d||!1},h=function(b){if("string"!=typeof b)throw new Error(a.errors.MAPPING_BAD_PROP)},i=function(b,c){if(void 0===c||null===c)throw new Error(a.errors.MAPPING_BAD_VALUE+b)},j=function(b,c){if("function"!=typeof c)throw new Error(a.errors.MAPPING_BAD_CLASS+b)},k=function(b,c){if("boolean"!=typeof c)throw new Error(a.errors.MAPPING_BAD_SINGLETON+b)},l=function(c,d){var e=a.getDependencies(d);if(b(e,c))throw new Error(a.errors.INJECT_INSTANCE_IN_ITSELF_CONSTRUCTOR)},m=function(b,c){if(c.hasOwnProperty(b))throw new Error(a.errors.INJECT_INSTANCE_IN_ITSELF_PROPERTY)};a.Injector=function(){this.mappings={},this.parent=null,this.strictMode=!1},a.getDependencies=function(a){function b(a,b,c){h.push(c)}var g,h=[];a.hasOwnProperty("inject")&&"[object Array]"===Object.prototype.toString.call(a.inject)&&a.inject.length>0&&(g=a.inject);for(var i=a.toString().replace(f,""),j=i.match(c),k=j[1].split(d),l=0,m=k.length;m>l;l++){var n=g&&g[l]?g[l]:k[l];n.replace(e,b)}return h},a.Injector.prototype={createChild:function(){var b=new a.Injector;return b.parent=this,b.strictMode=this.strictMode,b},getMappingVo:function(a){return this.mappings?this.mappings[a]?this.mappings[a]:this.parent?this.parent.getMappingVo(a):null:null},mapValue:function(b,c){if(this.mappings[b])throw new Error(a.errors.MAPPING_ALREADY_EXISTS+b);return h(b),i(b,c),this.mappings[b]=new g(b,c,void 0,void 0),this},mapClass:function(b,c,d){if(this.mappings[b])throw new Error(a.errors.MAPPING_ALREADY_EXISTS+b);return h(b),j(b,c),d&&k(b,d),this.mappings[b]=new g(b,null,c,d),this},removeMapping:function(a){return this.mappings[a]=null,delete this.mappings[a],this},hasMapping:function(a){return!!this.mappings[a]},hasInheritedMapping:function(a){return!!this.getMappingVo(a)},getMapping:function(a){for(var b in this.mappings)if(this.mappings.hasOwnProperty(b)){var c=this.mappings[b];if(c.value===a||c.cl===a)return c.prop}},getValue:function(b){var c=this.mappings[b];if(!c){if(!this.parent)throw new Error(a.errors.NO_MAPPING_FOUND);c=this.parent.getMappingVo.apply(this.parent,arguments)}if(c.cl){var d=Array.prototype.slice.call(arguments);return d[0]=c.cl,c.singleton?(c.value||(c.value=this.createInstance.apply(this,d)),c.value):this.createInstance.apply(this,d)}return c.value},getClass:function(a){var b=this.mappings[a];if(!b){if(!this.parent)return;b=this.parent.getMappingVo.apply(this.parent,arguments)}return b.cl?b.cl:void 0},instantiate:function(b){if("function"!=typeof b)throw new Error(a.errors.CREATE_INSTANCE_INVALID_PARAM);if(this.strictMode&&!b.hasOwnProperty("inject"))throw new Error(a.errors.DEPENDENCIES_MISSING_IN_STRICT_MODE);for(var c=[null],d=a.getDependencies(b),e=0,f=d.length;f>e;e++)if(arguments.length>e+1&&void 0!==arguments[e+1]&&null!==arguments[e+1])c.push(arguments[e+1]);else{var g=d[e],h=this.getMappingVo(g);if(h){var i=this.getInjectedValue(h,g);c.push(i)}else c.push(void 0)}return new(Function.prototype.bind.apply(b,c))},inject:function(a,b){this.parent&&this.parent.inject(a,!0);for(var c in this.mappings)if(this.mappings.hasOwnProperty(c)){var d=this.getMappingVo(c);(a.hasOwnProperty(d.prop)||a.constructor&&a.constructor.prototype&&a.constructor.prototype.hasOwnProperty(d.prop))&&(a[c]=this.getInjectedValue(d,c))}return"function"!=typeof a.postConstruct||b||a.postConstruct(),this},getInjectedValue:function(a,b){var c,d=a.value;return a.cl&&(a.singleton?(a.value||(l(b,a.cl),a.value=this.instantiate(a.cl),c=a.value),d=a.value):(l(b,a.cl),d=this.instantiate(a.cl),c=d)),c&&(m(b,c),this.inject(c)),d},createInstance:function(){var a=this.instantiate.apply(this,arguments);return this.inject(a),a},getValueFromClass:function(b){for(var c in this.mappings)if(this.mappings.hasOwnProperty(c)){var d=this.mappings[c];if(d.cl===b)return d.singleton?(d.value||(d.value=this.createInstance.apply(this,arguments)),d.value):this.createInstance.apply(this,arguments)}if(this.parent)return this.parent.getValueFromClass.apply(this.parent,arguments);throw new Error(a.errors.NO_MAPPING_FOUND)},dispose:function(){this.mappings={}}},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new Error("Error, you must bind a function.");var c=Array.prototype.slice.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(Array.prototype.slice.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))};return d}),"function"==typeof define&&"undefined"!=typeof define.amd&&define("infuse",a),"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=a),"undefined"!=typeof exports&&(exports=a)}(this.infuse=this.infuse||{}),function(a){"use strict";a.events={},a.events.version="0.5.6",Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new Error("Error, you must bind a function.");var c=Array.prototype.slice.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(Array.prototype.slice.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))};return d}),a.Event=function(b,c,d,e){var f=a.Event.createGenericEvent(b,d,e);return null!==c&&void 0!==c&&(f.params=c),f.isCloned=!1,f.clone=this.clone.bind(f),f.isIE9orIE10=this.isIE9orIE10,f.isDefaultPrevented=this.isDefaultPrevented,(this.isIE9orIE10()||!f.preventDefault||void 0===f.getDefaultPrevented&&void 0===f.defaultPrevented)&&(f.preventDefault=this.preventDefault.bind(f)),this.isIE9orIE10()&&(f.IE9or10PreventDefault=!1),f},a.Event.prototype.clone=function(){var b=a.Event.createGenericEvent(this.type,this.bubbles,this.cancelable);return b.params=this.params,b.isCloned=!0,b.clone=this.clone,b.isDefaultPrevented=this.isDefaultPrevented,b.isIE9orIE10=this.isIE9orIE10,this.isIE9orIE10()&&(b.IE9or10PreventDefault=this.IE9or10PreventDefault),b},a.Event.prototype.preventDefault=function(){return this.cancelable?(this.isIE9orIE10()?this.IE9or10PreventDefault=!0:this.defaultPrevented=!0,this):!1},a.Event.prototype.isDefaultPrevented=function(){return this.cancelable?this.isIE9orIE10()?this.IE9or10PreventDefault:void 0!==this.defaultPrevented?this.defaultPrevented:void 0!==this.getDefaultPrevented?this.getDefaultPrevented():!1:!1},a.Event.createGenericEvent=function(a,c,d){var e;return c=void 0!==c?c:!0,"object"==typeof document&&document.createEvent?(e=document.createEvent("Event"),e.initEvent(a,!!c,!!d)):"object"==typeof document&&document.createEventObject?(e=document.createEventObject(),e.type=a,e.bubbles=!!c,e.cancelable=!!d):e=new b(a,!!c,!!d),e},a.Event.prototype.isIE9orIE10=function(){return"object"!=typeof document?!1:void 0!==document.body.style.scrollbar3dLightColor&&void 0!==document.body.style.opacity||void 0!==document.body.style.msTouchAction},a.Event.prototype.toString=function(){return"[soma.Event]"};var b=function(a,b,c){this.type=a,this.bubbles=!!b,this.cancelable=!!c,this.defaultPrevented=!1,this.currentTarget=null,this.target=null};a.EventDispatcher=function(){this.listeners=[]},a.EventDispatcher.prototype.addEventListener=function(a,b,c){if(this.listeners&&a&&b){isNaN(c)&&(c=0);for(var d=0;d<this.listeners.length;d++){var e=this.listeners[d];if(e.type===a&&e.listener===b)return}this.listeners.push({type:a,listener:b,priority:c,scope:this})}},a.EventDispatcher.prototype.removeEventListener=function(a,b){if(this.listeners&&a&&b)for(var c=this.listeners.length;c-- >0;){var d=this.listeners[c];d.type===a&&d.listener===b&&this.listeners.splice(c,1)}},a.EventDispatcher.prototype.hasEventListener=function(a){if(!this.listeners||!a)return!1;for(var b=0,c=this.listeners.length;c>b;++b){var d=this.listeners[b];if(d.type===a)return!0}return!1},a.EventDispatcher.prototype.dispatchEvent=function(a){if(!this.listeners||!a)throw new Error("Error in EventDispatcher (dispatchEvent), one of the parameters is null or undefined.");var b,c=[];for(b=0;b<this.listeners.length;b++){var d=this.listeners[b];d.type===a.type&&c.push(d)}for(c.sort(function(a,b){return b.priority-a.priority}),b=0;b<c.length;b++)c[b].listener.apply(a.srcElement?a.srcElement:a.currentTarget,[a]);return!a.isDefaultPrevented()},a.EventDispatcher.prototype.dispatch=function(b,c,d,e){if(!this.listeners||!b||""===b)throw new Error("Error in EventDispatcher (dispatch), one of the parameters is null or undefined.");var f=new a.Event(b,c,d,e);return this.dispatchEvent(f),f},a.EventDispatcher.prototype.dispose=function(){this.listeners=null},a.EventDispatcher.prototype.toString=function(){return"[soma.EventDispatcher]"},"function"==typeof define&&"undefined"!=typeof define.amd&&define("soma-events",a),"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=a),"undefined"!=typeof exports&&(exports=a)}(this.soma=this.soma||{}),function(a,b){"use strict";a.version="2.1.4",a.applyProperties=function(a,b,c,d){if("[object Array]"===Object.prototype.toString.apply(d))for(var e=0,f=d.length;f>e;e++)void 0!==a[d[e]]&&null!==a[d[e]]||(c&&"function"==typeof b[d[e]]?a[d[e]]=b[d[e]].bind(b):a[d[e]]=b[d[e]]);else for(var g in b)c&&"function"==typeof b[g]?a[g]=b[g].bind(b):a[g]=b[g]},a.augment=function(a,b,c){if(b.prototype&&a.prototype)if("[object Array]"===Object.prototype.toString.apply(c))for(var d=0,e=c.length;e>d;d++)a.prototype[c[d]]||(a.prototype[c[d]]=b.prototype[c[d]]);else for(var f in b.prototype)a.prototype[f]||(a.prototype[f]=b.prototype[f])},a.inherit=function(b,c){var d;d=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return b.apply(this,arguments)};var e=function(){};return e.prototype=b.prototype,d.prototype=new e,c&&a.applyProperties(d.prototype,c),d.prototype.constructor=d,d.parent=b.prototype,d.extend=function(b){return a.inherit(d,b)},d},a.extend=function(b){return a.inherit(function(){},b)};var c=[];a.plugins=a.plugins||{},a.plugins.add=function(a){c.push(a)},a.plugins.remove=function(a){for(var b=c.length-1,d=0;b>=d;b--)a===c[b]&&c.splice(b,1)},a.Application=a.extend({constructor:function(){function f(){g.injector=new b.Injector(g.dispatcher),g.dispatcher=new a.EventDispatcher,g.injector.mapValue("injector",g.injector),g.injector.mapValue("instance",g),g.injector.mapValue("dispatcher",g.dispatcher),g.injector.mapClass("mediators",d,!0),g.mediators=g.injector.getValue("mediators"),g.injector.mapClass("commands",e,!0),g.commands=g.injector.getValue("commands");for(var f=0,h=c.length;h>f;f++)g.createPlugin(c[f])}var g=this;f.bind(this)(),this.init(),this.start()},createPlugin:function(){if(0===arguments.length||!arguments[0])throw new Error("Error creating a plugin, plugin class is missing.");for(var a=b.getDependencies(arguments[0]),c=[arguments[0]],d=0,e=a.length;e>d;d++)this.injector.hasMapping(a[d])||this.injector.hasInheritedMapping(a[d])?c.push(this.injector.getValue(a[d])):c.push(void 0);var f=c.length-1;for(c.length;f>=0&&"undefined"==typeof c[f];f--)c.splice(f,1);for(var g=1,h=arguments.length;h>g;g++)c.push(arguments[g]);return this.injector.createInstance.apply(this.injector,c)},init:function(){},start:function(){},dispose:function(){this.injector&&(this.injector.removeMapping("injector"),this.injector.removeMapping("dispatcher"),this.injector.removeMapping("mediators"),this.injector.removeMapping("commands"),this.injector.removeMapping("instance")),this.injector&&this.injector.dispose(),this.dispatcher&&this.dispatcher.dispose(),this.mediators&&this.mediators.dispose(),this.commands&&this.commands.dispose(),this.injector=void 0,this.dispatcher=void 0,this.mediators=void 0,this.commands=void 0,this.instance=void 0}});var d=a.extend({constructor:function(){this.injector=null,this.dispatcher=null},create:function(a,b){if(!a||"function"!=typeof a)throw new Error("Error creating a mediator, the first parameter must be a function.");if(void 0===b||null===b)throw new Error("Error creating a mediator, the second parameter cannot be undefined or null.");var c=[],d=[],e=Object.prototype.toString.call(b);("[object Array]"===e||"[object NodeList]"===e)&&b.length>0?c=[].concat(b):c.push(b);for(var f=0,g=c.length;g>f;f++){var h=this.injector.createChild();h.mapValue("target",c[f]);var i=h.createInstance(a);if(1===c.length)return i;d.push(i)}return d},dispose:function(){this.injector=void 0,this.dispatcher=void 0}}),e=a.extend({constructor:function(){this.boundHandler=this.handler.bind(this),this.dispatcher=null,this.injector=null,this.list={}},has:function(a){return null!==this.list[a]&&void 0!==this.list[a]},get:function(a){return this.has(a)?this.list[a]:void 0},getAll:function(){var a={};for(var b in this.list)this.list.hasOwnProperty(b)&&(a[b]=this.list[b]);return a},add:function(a,b){if("string"!=typeof a)throw new Error("Error adding a command, the first parameter must be a string.");if("function"!=typeof b)throw new Error('Error adding a command with the name "'+b+'", the second parameter must be a function, and must contain an "execute" public method.');if(this.has(a))throw new Error('Error adding a command with the name: "'+a+'", already registered.');this.list[a]=b,this.addInterceptor(a)},remove:function(a){this.has(a)&&(this.list[a]=void 0,delete this.list[a],this.removeInterceptor(a))},addInterceptor:function(a){this.dispatcher.addEventListener(a,this.boundHandler,-Number.MAX_VALUE)},removeInterceptor:function(a){this.dispatcher.removeEventListener(a,this.boundHandler)},handler:function(a){a.isDefaultPrevented&&!a.isDefaultPrevented()&&this.executeCommand(a)},executeCommand:function(a){var b=a.type;if(this.has(b)){var c=this.injector.createInstance(this.list[b]);if(!c.hasOwnProperty("execute")&&"function"===c.execute)throw new Error("Error in "+this+" Command "+c+" must contain an execute public method.");c.execute(a)}},dispose:function(){for(var a in this.list)this.list.hasOwnProperty(a)&&this.remove(a);this.boundHandler=void 0,this.dispatcher=void 0,this.injector=void 0,this.list=void 0}});a.EventDispatcher.extend=function(b){return a.inherit(a.EventDispatcher,b)},a.Event.extend=function(b){return a.inherit(a.Event,b)},b.Injector.extend=function(c){return a.inherit(b.Injector,c)},"function"==typeof define&&"undefined"!=typeof define.amd&&define("soma",a),"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a:window.soma=a}(this.soma=this.soma||{},this.infuse);