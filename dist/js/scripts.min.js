/*
 Noahdecoco 2016-03-28 
*/
function Event(a){this._sender=a,this._listeners=[]}function ListModel(a){this._items=a,this._selectedIndex=-1,this.itemAdded=new Event(this),this.itemRemoved=new Event(this),this.selectedIndexChanged=new Event(this)}function ListView(a,b){this._model=a,this._elements=b;var c=this;this._model.itemAdded.attach(function(){c.rebuildList()}),this._model.itemRemoved.attach(function(){c.rebuildList()}),this.listModified=new Event(this),this._elements.list.change(function(a){c.listModified.notify({index:a.target.selectedIndex})}),this.addButtonClicked=new Event(this),this._elements.addButton.click(function(){c.addButtonClicked.notify()}),this.delButtonClicked=new Event(this),this._elements.delButton.click(function(){c.delButtonClicked.notify()})}function ListController(a,b){this._model=a,this._view=b;var c=this;this._view.listModified.attach(function(a,b){c.updateSelected(b.index)}),this._view.addButtonClicked.attach(function(){c.addItem()}),this._view.delButtonClicked.attach(function(){c.delItem()})}var Noix=function(a){if(this.config={},a)for(var b in a)a.hasOwnProperty(b)&&(this.config[b]=a[b])};Noix.Event=function(a){this.sender=a,this.listeners=[]},Noix.Event.prototype.setSender=function(a){this.sender=a},Noix.Event.prototype.getSender=function(){return this.sender},Noix.Event.prototype.attachListener=function(){this.listeners.push(listener)},Noix.Event.prototype.removeListener=function(){},Noix.Event.prototype.notifyListener=function(){},Noix.Event.prototype.notifyListeners=function(a){for(var b=0;b<_this.listeners.length;b++)this.listeners[b](_this.sender,a)},Noix.Model=function(a){var b=this;b.data=a,b.itemAdded=new Noix.Event(b);var c=function(){return[].concat(b.data)},d=function(a){};return{getData:c,addData:d}},Noix.View=function(a,b){var c=this;c.model=a,c.elements=b;var d=function(){c.elements.innerHTML="";for(var a=0;a<c.model.getData().length;a++){var b=document.createElement("li");b.innerHTML=c.model.getData()[a],c.elements.appendChild(b)}},e=function(a){c[a.eventName]=new Event(c),console.log(c[a.eventName])};return{render:d,registerControl:e}},Noix.Controller=function(a,b){var c=this;c.model=a,c.view=b;var d=function(){c.view.render()};return{renderView:d}},Event.prototype={attach:function(a){this._listeners.push(a)},notify:function(a){var b;for(b=0;b<this._listeners.length;b+=1)this._listeners[b](this._sender,a)}},ListModel.prototype={getItems:function(){return[].concat(this._items)},addItem:function(a){this._items.push(a),this.itemAdded.notify({item:a})},removeItemAt:function(a){var b;b=this._items[a],this._items.splice(a,1),this.itemRemoved.notify({item:b}),a===this._selectedIndex&&this.setSelectedIndex(-1)},getSelectedIndex:function(){return this._selectedIndex},setSelectedIndex:function(a){var b;b=this._selectedIndex,this._selectedIndex=a,this.selectedIndexChanged.notify({previous:b})}},ListView.prototype={show:function(){this.rebuildList()},rebuildList:function(){var a,b,c;a=this._elements.list,a.html(""),b=this._model.getItems();for(c in b)b.hasOwnProperty(c)&&a.append($("<option>"+b[c]+"</option>"));this._model.setSelectedIndex(-1)}},ListController.prototype={addItem:function(){var a=window.prompt("Add item:","");a&&this._model.addItem(a)},delItem:function(){var a;a=this._model.getSelectedIndex(),-1!==a&&this._model.removeItemAt(this._model.getSelectedIndex())},updateSelected:function(a){this._model.setSelectedIndex(a)}},function(){var a=(document.getElementById("todo-list"),new Noix.Event("a sender"));console.log(a.getSender()),a.setSender("another one"),console.log(a.getSender())}();